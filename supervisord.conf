[supervisord]
nodaemon=true

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
priority=1

[program:gunicorn]
command=gunicorn -k uvicorn.workers.UvicornWorker main:app --bind 0.0.0.0:8000 --timeout 30
autostart=true
autorestart=true
stderr_logfile=/var/log/gunicorn.err.log
stdout_logfile=/var/log/gunicorn.out.log

[program:fastapi]
command=gunicorn -k uvicorn.workers.UvicornWorker main:app --bind 127.0.0.1:8000 --timeout 30
autostart=true
autorestart=true
priority=2
